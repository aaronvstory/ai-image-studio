<!DOCTYPE html>
<html>
<head>
    <title>Debug Supabase Key</title>
</head>
<body>
    <h1>Testing Supabase Keys</h1>
    <div id="results"></div>

    <script>
        async function testKeys() {
            const results = document.getElementById('results');
            
            // The key you said is in Vercel
            const vercelKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inl0ZGhoa2xwc2FuZ2h4b3VzcGtyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTYyMzY0NjYsImV4cCI6MjA3MTgxMjQ2Nn0.PZoeqfctFH9XLfeuhK3TMPKI92JchJfRRSwL8Q4mqkQ';
            
            // Test this key
            const response = await fetch('https://ytdhhklpsanghxouspkr.supabase.co/auth/v1/health', {
                headers: {
                    'apikey': vercelKey,
                    'Authorization': `Bearer ${vercelKey}`
                }
            });
            
            results.innerHTML = `
                <h2>Key Test Results:</h2>
                <p>Status: ${response.status}</p>
                <p>Status Text: ${response.statusText}</p>
                <p>Response: ${await response.text()}</p>
                <hr>
                <p>Key being tested (from Vercel):</p>
                <pre style="word-wrap: break-word">${vercelKey}</pre>
            `;
            
            // Now test signup
            if (response.status === 200) {
                const signupResponse = await fetch('https://ytdhhklpsanghxouspkr.supabase.co/auth/v1/signup', {
                    method: 'POST',
                    headers: {
                        'apikey': vercelKey,
                        'Authorization': `Bearer ${vercelKey}`,
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email: `browsertest${Date.now()}@gmail.com`,
                        password: 'Test123456!'
                    })
                });
                
                results.innerHTML += `
                    <h2>Signup Test:</h2>
                    <p>Status: ${signupResponse.status}</p>
                    <p>Response: ${await signupResponse.text()}</p>
                `;
            }
        }
        
        testKeys();
    </script>
</body>
</html>